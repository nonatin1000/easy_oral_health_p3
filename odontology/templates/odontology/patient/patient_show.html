{% extends "base.html" %}
{% load widget_tweaks %}
{% load tooth %}
{% block body %}

<nav class="navbar navbar-default">
  <div class="container">
    <a class="navbar-brand" href="#">Informações sobre o Paciente</a>
    <ul class="nav navbar-nav pull-right">
      <li>
        <p class="navbar-btn">
          <a class="btn btn-default" href="{% url 'patient_index' %}"> 
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            Voltar
          </a>
        </p>
      </li>

      <li>
        <p class="navbar-btn">
          <a class="btn btn-default" href="{% url 'patient_edit' patient.id %}"> 
            <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
            Editar
          </a>
        </p>
      </li>
      <li>
        <p class="navbar-btn">
          <a href="#modal-id-{{ patient.id }}" class="btn btn-default" title="Remover" data-toggle="modal">
            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
            Excluir
          </a>
        </p>
      </li>
    </ul>
  </div>
</nav>

<!-- Tabs -->

<div class="container">
  <div class="row">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <!-- Nav tabs -->
      <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#paciente" aria-controls="paciente" role="tab" data-toggle="tab">Paciente</a></li>
        <li role="presentation"><a href="#odontograma" aria-controls="odontograma" role="tab" data-toggle="tab">Odontograma</a></li>
        <li role="presentation"><a href="#proc_bucal" aria-controls="proc_bucal" role="tab" data-toggle="tab">Procedimento Bucal</a></li>
      </ul>

      <!-- Tab panes -->
      <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="paciente">

          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <p>
              <strong>Nome:</strong>
              {{ patient.name }}
            </p>
            <p>
              <strong>Sexo:</strong>
              {{ patient.sex }}
            </p>
            <p>
              <strong>Estado civil:</strong>
              {{ patient.marital_status }}
            </p>
            <p>
              <strong>Nascimento:</strong>
              {{ patient.birth_date }}
            </p>
            <p>
              <strong>Email:</strong>
              {{ patient.email }}
            </p>
            <p>
              <strong>Categoria:</strong>
              {{ patient.types }}
            </p>
            <p>
              <strong>País:</strong>
              {{ address.country }}
            </p>
            <p>
              <strong>Estado:</strong>
              {{ address.state }}
            </p>
            <p>
              <strong>Cidade:</strong>
              {{ address.city }}
            </p>
            <p>
              <strong>Bairro:</strong>
              {{ address.neighborhood }}
            </p>
            <p>
              <strong>Rua:</strong>
              {{ address.street }}
            </p>
            <p>
              <strong>Numero:</strong>
              {{ address.number }}
            </p>
            <p>
              <strong>Complemento:</strong>
              {{ address.complement }}
            </p>
            <p>
              <strong>Cep:</strong>
              {{ address.zip_code }}
            </p>
            <p>
              <strong>Ponto de Referência:</strong>
              {{ address.reference_point }}
            </p>
            <p>
              <strong>Telefone:</strong>
              {{ patient.phone }}
            </p>
          </div>
          <hr />
          {% if patient.dependents.count > 0 %}
          <h3>Dependentes</h3>
          <table class="table">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Email</th>
                <th>Fone</th>
                <th style="width: 35%;">Ações</th>
              </tr>
            </thead>
            <tbody>
              {% for dependent in patient.dependents.all %}
              <tr>
                <input type="hidden" name="types" id="types" value="DEPENDENT"></td>
                <td>{{ dependent.name }}</td>
                <td>{{ dependent.email }}</td>
                <td>{{ dependent.phone }}</td>
                <td>
                  <a href="{% url 'patient_edit' dependent.id %}" class="btn btn-default" title="Editar">
                    <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                  </a>
                  <a href="{% url 'odontogram' dependent.id %}" class="btn btn-default" title="Odontograma">
                    <span class="glyphicon glyphicon-th" aria-hidden="true"></span>
                  </a>
                  <a href="{% url 'oral_patient_procedure' dependent.id %}" class="btn btn-default" title="Procedimento Bucal">
                    <span class="glyphicon glyphicon-th-large" aria-hidden="true"></span>
                  </a>
                  <a href="#modal-id-{{ dependent.id }}" class="btn btn-default" title="Remover" data-toggle="modal">
                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                  </a>
                </td>
              </tr>
              <!-- MODAL -->
              <div class="col-xs-12 col-sm-12 col-md-10 col-lg-10">
                <div class="modal fade" id="modal-id-{{ dependent.id }}">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">Alerta!</h4>
                      </div>
                      <div class="modal-body">
                      <p>Deseja realmente remover <strong>{{ dependent.name }}</strong>?</p>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                        <a href="{% url 'patient_delete' dependent.id %}" class='btn btn-danger' title='Exibir'>
                          Delete
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- /MODAL -->
              {% empty %}
              <tr>
                <td colspan="3">Sem dependentes</td>
              </tr>
              {% endfor %}
            </tbody>

          </table>
          {% endif %}
        </div>
        <div role="tabpanel" class="tab-pane" id="odontograma">
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <p>
              <strong>Nome: </strong> {{ patient.name }}
            </p>
            <p>
              <strong>Estado civil: </strong> {{ patient.marital_status }}
            </p>
            <p>
              <strong>Sexo: </strong> {{ patient.sex }}
            </p>
            <p>
              <strong>Pai: </strong> {{ patient.father }}
            </p>
            <p>
              <strong>Mãe: </strong> {{ patient.mother }}
            </p>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <p>
              <strong>Data de Nasc.: </strong> {{ patient.birth_date }}
            </p>
            <p>
              <strong>Tipo: </strong> {{ patient.types }}
            </p>
            <p>
              <strong>Fone: </strong> {{ patient.phone }}
            </p>
            <p>
              <strong>E-mail: </strong> {{ patient.email }}
            </p>
            <p>
              <strong>Curso: </strong> {{ patient.course }}
            </p>
          </div>
          <div class="row" style="margin-bottom: 1em">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 outer">
              <div class="tooth-container-row">
                {% for patient_tooth in odontogram_patient %}
                <div class="tooth-container">
                  <div class="tooth-box">
                    {% render_tooth patient_tooth %}
                  </div>
                  <div class="tooth-label-box">
                    {{ patient_tooth.tooth.name }}
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
              <table class="table">
                <thead>
                  <tr>
                    <th colspan="3">Legenda</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><div class="circulo bg-restaurado"></div></td>
                    <td>Restaurado</td>
                    <td>Quadro cheio em preto</td>
                  </tr>
                  <tr>
                    <td><div class="circulo bg-cariado"></div></td>
                    <td>Cariado</td>
                    <td>Quadro cheio em vermelho</td>
                  </tr>
                  <tr>
                    <td><div class="circulo bg-pendente"></div></td>
                    <td>Restauração a ser feita</td>
                    <td>Quadro cheio em verde</td>
                  </tr>
                  <tr>
                    <td><div class="circulo bg-extracao"></div></td>
                    <td>Indicado para extração</td>
                    <td>Quadro cheio em cinza</td>
                  </tr>
                  <tr>
                    <td><div class="circulo bg-extraido"></div></td>
                    <td>Extraído ou ausente</td>
                    <td>Quadro totalmente preto</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div role="tabpanel" class="tab-pane" id="proc_bucal">
          <!-- Dados do Paciente-->
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <p>
              <strong>Nome: </strong> {{ patient.name }}
            </p>
            <p>
              <strong>Estado civil: </strong> {{ patient.marital_status }}
            </p>
            <p>
              <strong>Sexo: </strong> {{ patient.sex }}
            </p>
            <p>
              <strong>Pai: </strong> {{ patient.father }}
            </p>
            <p>
              <strong>Mãe: </strong> {{ patient.mother }}
            </p>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <p>
              <strong>Data de Nasc.: </strong> {{ patient.birth_date }}
            </p>
            <p>
              <strong>Tipo: </strong> {{ patient.types }}
            </p>

            <p>
              <strong>Fone: </strong> {{ patient.phone }}
            </p>
            <p>
              <strong>E-mail: </strong> {{ patient.email }}
            </p>
            <p>
              <strong>Curso: </strong> {{ patient.course }}
            </p>
          </div>
          <!-- Lista os procedimento na boca do paciente-->
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <h4>Procedimentos Bucal</h4>
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>Dentista</th>
                  <th>Procedimento Bucal</th>
                </tr>
              </thead>
              <tbody>
                {% for oralpatientprocedure in oral_patient_procedure %}
                <tr>
                  <td>{{ oralpatientprocedure.dentist.first_name }}</td>
                  <td>{{ oralpatientprocedure.oral_procedure.name }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Fim Tabs -->
{% endblock %}