{% extends "base.html" %}
{% load staticfiles %}
{% block body %}

<nav class="navbar navbar-default">
	<div class="container">
		<!-- Form Search -->
		<div class="row">
			<ul class="nav nav-inline">
				<li>
					<div class="col-md-8 col-xs-8 col-sm-8 space-top">
						<form class="form-horizontal" action="." method="get">
							<div class="input-group">
								<input id="search_box" name="search_box" type="text" class="form-control" readonly="true">
								<span class="input-group-btn">
									<button type="submit" class="btn btn-default form-control" title="Clique para realizar a pesquisar">
										<span class="glyphicon glyphicon-search"></span>
									</button>
								</span>
							</div>
						</form>
					</div>
				</li>
				<li>
					<div class="col-md-4 col-xs-4 col-sm-4 space-top">
						<button type="submit" class="btn btn-default pull-right" title="Clique aqui para imprimir" onclick="window.print();">
							<span class="glyphicon glyphicon-print"></span>
							Imprimir
						</button>
					</div>
				</li>
			</ul>
		</div>
	</div>
</nav>

<div class="container-fluid">
	<div class="row">
		<div class="col-md-12">
			{% if consultations.count > 0 %}
			<table class="table table-hover table-bordered espaco-0">
				<thead>
					<tr>
						<th rowspan="2" class="vertical-text"><img src="{% static "images/horario.png" %}"></th>
						<th rowspan="2" class="alig-cell cent" width="20%">Nome</th>
						<th colspan="5" class="cent">Categoria</th>
						<th colspan="2" class="cent">Sexo</th>
						<th colspan="2" class="cent">Idade</th>
						<th colspan="3" class="cent">Compare<br>cimento</th>
						<th colspan="17" class="cent">Procedimentos</th>
					</tr>
					<tr class="rotate-cells">
						<th class="vertical-text"><img src="{% static "images/estudante.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/professor.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/tec.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/dep.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/ter.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/f.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/m.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/17.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/31.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/p.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/a.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/falta.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/dente.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/ex.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/primeira.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/retorno.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/urgencia.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/rx.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/ionomero.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/amalgama.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/resina.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/provisoria.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/exo.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/tar.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/profilaxia.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/fluor.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/pontos.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/soli.png" %}"></th>
						<th class="vertical-text"><img src="{% static "images/concluido.png" %}"></th>
					</tr>
				</thead>
				<tbody>

					{% for consultation in consultations %}
					<tr>
						<td>{{ consultation.created_on|date:"H:i" }}</td>
						<td>{{ consultation.patient.name }}</td>
						<!-- Categoria -->
						{% if consultation.patient.types == "Estudante" %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.patient.types == "Professor" %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.patient.types == "Técnico Administrativo" %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.patient.types == "Dependente" %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.patient.types == "Terceirizado" %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						<!-- Sexo -->
						{% if consultation.patient.sex == "F" %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.patient.sex == "M" %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						<!-- Idade -->
						{% if consultation.patient.age > 16 and consultation.patient.age <= 30 %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.patient.age > 30 %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						<!-- Comparecimento -->
						{% if consultation.attendance == True %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.attendance == False %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.lack_justified == True %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						<!-- Dente -->
						{% if consultation.patientdentalprocedure_set.count > 0 %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						<!-- Procedimentos -->
						{% if consultation.clinical_examination|length > 0 %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.first_consultation == True %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.return_consultation == True %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.urgency_consultation == True %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.radiograph == True %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						<!--Pega todos os procedimentos dental daquele paciente -->
						{% if consultation.consultation.dental_proc.rest_ionomero %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.consultation.dental_proc.rest_amalgama %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.consultation.dental_proc.rest_resina %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.consultation.dental_proc.rest_provisoria %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.consultation.dental_proc.exodontia %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						<h1>
							{{ consultation.consultation.dental_proc.res_ionomero }}
						</h1>

						<!--Pega todos os procedimentos bucal daquele paciente -->
						{% if consultation.oralpatientprocedure.oral_proc.tartarectomia %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.oralpatientprocedure.oral_proc.profilaxia %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.oralpatientprocedure.oral_proc.fluor %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						{% if consultation.oralpatientprocedure.oral_proc.remocao_de_pontos %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}

						<!-- Solicitações de Exames ERRO-->
						{% if consultation.examinationsolicitation_set.count > 0 %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}
						{% if consultation.completed_treatment == True %}
							<td>X</td>
						{% else %}
							<td></td>
						{% endif %}
					</tr>
					{% endfor %}
				</tbody>
			
			</table>
			{% else %}
            <center>
              <h4>
                <b>Sem consultas</b>
              </h4>
            </center>
            {% endif %}
		</div>
	</div>
</div>
</div>
<script>
	$(document).ready(function () {
		$('#search_box').datepicker({
			format: "yyyy-mm-dd",
			todayBtn: "linked",
			language: "pt-BR",
			autoclose: true,
			todayHighlight: true
		});
	});
</script>

{% endblock %}
